# cs_algo_api_bars_scanner


---

## توضیح کد ربات با استفاده از Enum و رویداد OnTick

این کد یک ربات معامله‌گر ساده با استفاده از زبان #C و پلتفرم cAlgo است که به‌صورت مرحله‌ای (با فاصله زمانی تنظیم‌شده) خطوط عمودی (Flag Lines) روی چارت رسم می‌کند.

### ویژگی‌ها و نحوه عملکرد:

- **تعریف Enumها:**  
  دو Enum تعریف شده‌اند برای انتخاب رنگ خطوط (`LineColors`) و نوع خط (`LineStyles`) که از طریق پارامتر ورودی قابل تنظیم هستند.

- **پارامترهای ورودی ربات:**  
  - انتخاب رنگ خط با مقدار پیش‌فرض زرد  
  - انتخاب سبک خط (مثلاً نقطه‌چین، خط‌چین و ...)  
  - ضخامت خط با مقدار پیش‌فرض 2  
  - فاصله زمانی (ثانیه) برای اسکن و رسم هر خط (پیش‌فرض 0.5 ثانیه)

- **رابط کاربری (UI):**  
  ربات یک پنل کوچک با دو دکمه اضافه می‌کند:  
  - دکمه شروع `Start` که فرآیند رسم خطوط را فعال می‌کند  
  - دکمه توقف `Stop` که فرآیند را متوقف می‌کند

- **عملکرد اصلی:**
  - پس از شروع، ربات در هر تیک (OnTick) زمانی که وقت مشخص شده فرا برسد، یک خط عمودی روی چارت رسم می‌کند.  
  - خط‌های قبلی قبل از رسم خط جدید حذف می‌شوند تا فقط یک خط در هر لحظه نمایش داده شود.  
  - اندیس شمع‌ها (Bars) از جدیدترین به قدیمی‌ترین کاسته می‌شود تا خطوط پشت سرهم روی بازه‌های زمانی پشت سر هم رسم شود.  
  - زمانی که به اولین کندل برسد، اسکن متوقف می‌شود.

- **مدیریت رنگ و سبک خطوط:**  
  توابع کمکی برای تبدیل مقادیر Enum به رنگ و سبک خط در محیط cAlgo استفاده شده است.

- **پاک‌سازی:**  
  هنگام توقف ربات، خط رسم شده آخرین بار حذف می‌شود و متن مربوط به توقف توسط دستور Print چاپ می‌شود.

---

### خلاصه:

این ربات مناسب کسانی است که می‌خواهند به صورت مرحله‌ای و با قابلیت کنترل روی چارت، خطوط عمودی بکشند که می‌تواند در تحلیل‌ها یا نمایش دقیق تر زمان‌ها و نقاط خاص در نمودار به کار آید. امکاناتی مثل انتخاب رنگ، ضخامت و نوع خط باعث می‌شود که ظاهر بصری قابل تنظیم باشد.

---
